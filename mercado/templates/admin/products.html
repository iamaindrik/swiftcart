{% extends 'base.html' %}{% block content %}
<div class="flex justify-between items-center mb-4">
  <h1 class="text-2xl font-bold">Products</h1>
  <a href="{{ url_for('admin.product_new') }}" class="px-3 py-1 bg-black text-white rounded">+ New</a>
</div>
<div class="grid md:grid-cols-3 gap-4">
{% for p in items %}
  <div class="card">
    <img class="w-full h-40 object-cover rounded" src="{{ p.image_url or ('https://picsum.photos/seed/' ~ p.id ~ '/600/400') }}">
    <div class="mt-2 font-semibold">{{ p.title }}</div>
    <div class="text-sm">{{ p.sale_price|inr }} {% if p.discount_percent %}<span class="text-green-700">{{ p.discount_percent }}% off</span>{% endif %}</div>
    {% if p.is_featured %}<div class="text-xs mt-1 bg-gray-100 inline-block px-2 py-0.5 rounded">Featured</div>{% endif %}
    <div class="flex gap-2 mt-3">
      <a class="px-3 py-1 border rounded" href="{{ url_for('admin.product_edit', pid=p.id) }}">Edit</a>
      <form method="post" action="{{ url_for('admin.product_delete', pid=p.id) }}" onsubmit="return confirm('Delete?')"><button class="px-3 py-1 border rounded">Delete</button></form>
    </div>
  </div>
{% else %}<p>No products yet.</p>{% endfor %}
</div>
{% endblock %}
