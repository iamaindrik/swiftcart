<!-- templates/shop/_card.html -->
<div class="bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-2xl transition transform hover:-translate-y-2 group h-full flex flex-col">

  <!-- Image Section (no cropping, full image shown) -->
  <div class="relative overflow-hidden">
    <a href="{{ url_for('shop.product_detail', pid=p.id) }}" class="block">
      <img
        src="{{ p.image_url or ('https://picsum.photos/seed/' ~ p.id ~ '/600/400') }}"
        alt="{{ p.title }}"
        loading="lazy"
        class="block w-full h-56 sm:h-60 lg:h-64 object-contain p-3"
      >
    </a>

    {% if p.discount_percent > 0 %}
      <span class="absolute top-3 left-3 bg-gradient-to-r from-red-500 to-pink-600 text-white text-xs font-semibold px-3 py-1 rounded-lg shadow-md">
        -{{ p.discount_percent }}%
      </span>
    {% endif %}
  </div>

  <!-- Product Details -->
  <div class="p-4 flex-1 flex flex-col">
    <!-- Title -->
    <a href="{{ url_for('shop.product_detail', pid=p.id) }}"
       class="block font-semibold text-gray-900 text-sm sm:text-base leading-tight h-12 overflow-hidden">
      {{ p.title }}
    </a>

    <!-- Price -->
    <div class="mt-2 flex items-center gap-2 text-gray-900 font-bold">
      {% if p.discount_percent > 0 %}
        <span class="text-lg">{{ p.sale_price|inr }}</span>
        <span class="line-through text-gray-400 text-sm">{{ p.price|inr }}</span>
        <span class="text-green-600 text-xs sm:text-sm font-semibold">{{ p.discount_percent }}% off</span>
      {% else %}
        <span class="text-lg">{{ p.price|inr }}</span>
      {% endif %}
    </div>

    <!-- Add to Cart -->
    <a href="{{ url_for('shop.add_to_cart', pid=p.id) }}"
       class="mt-4 w-full inline-flex items-center justify-center gap-2 rounded-xl bg-black text-white py-2.5 font-medium hover:bg-gray-800 transition">
      ðŸ›’ Add to Cart
      <span class="sr-only">Add {{ p.title }} to cart</span>
    </a>
  </div>
</div>
