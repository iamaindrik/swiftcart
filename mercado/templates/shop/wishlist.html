{% extends 'base.html' %}
{% block content %}
<h1 class="text-3xl font-bold mb-6">ðŸ’– Your Wishlist</h1>

{% if products %}
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
  {% for p in products %}
  <div class="relative bg-white rounded-2xl shadow-lg overflow-hidden transform hover:scale-105 transition duration-300">
    
    <!-- Product Image -->
    <a href="{{ url_for('shop.product_detail', pid=p.id) }}">
      <img src="{{ p.image_url or ('https://picsum.photos/seed/' ~ p.id ~ '/400/300') }}" 
           alt="{{ p.title }}" class="w-full h-48 object-cover hover:scale-110 transition-transform duration-300">
    </a>

    <!-- Product Info -->
    <div class="p-4">
      <a href="{{ url_for('shop.product_detail', pid=p.id) }}" class="font-semibold text-gray-800 hover:text-blue-600">{{ p.title }}</a>
      <div class="mt-2 text-gray-600">
        {% if p.discount_percent > 0 %}
          <span class="text-lg font-bold">{{ p.sale_price|inr }}</span>
          <span class="line-through text-gray-400 ml-2">{{ p.price|inr }}</span>
          <span class="ml-2 text-green-600 text-sm">{{ p.discount_percent }}% off</span>
        {% else %}
          <span class="text-lg font-bold">{{ p.price|inr }}</span>
        {% endif %}
      </div>
    </div>

    <!-- Remove Button -->
    <form action="{{ url_for('shop.toggle_wishlist', pid=p.id) }}" method="get" class="absolute top-2 right-2">
      <button type="submit" class="bg-red-500 hover:bg-red-600 text-white p-2 rounded-full shadow-md transition">
        <i data-feather="x" class="w-4 h-4"></i>
      </button>
    </form>

  </div>
  {% endfor %}
</div>
{% else %}
<p class="text-gray-500 text-lg mt-6">Your wishlist is empty. Start adding your favorite products!</p>
{% endif %}
{% endblock %}

<script>
  // Initialize feather icons for remove button
  feather.replace({ 'stroke-width': 1.5 });
</script>
